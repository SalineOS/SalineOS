#!/bin/bash
# Licensed under the GNU General Public License Version 2
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA
####################################################################################################
## Authored by Anthony Nordquist of the SalineOS project. http://www.salineos.com/  salinelinux@gmail.com 2012
## Copyright 2012 Anthony Nordquist


if [ -f /tmp/magix-nvidia-card ]; then
 yad --title="Magix Launcher" --window-icon="jockey" --width="300" --wrap --text="Nvidia provides a closed source proprietary driver for your graphics chipset. This driver will provide better 3D performance than the currently used open source driver. This program can automatically download and install this driver for you if desired. Installation of the proprietary driver will reboot the machine when finished.\n" --button=$"Don't Ask Again:1" --button=$"Not Now:3" --button=$"Install:5"

ret="$?"

if [ "$ret" = "252" ]; then
 killall -KILL yad
 exit 0
elif [ "$ret" = "1" ]; then
 touch $HOME/.magix-dont-run
 killall -KILL yad
 exit 0
elif [ "$ret" = "3" ]; then
 exit 0
elif [ "$ret" = "5" ]; then
 killall -KILL yad
 gksudo /usr/bin/magix-driver-installer
 exit 0
fi

fi

if [ -f /tmp/magix-ati-card ]; then
 yad --title="Magix Launcher" --width="300" --wrap --text="ATI graphics chipset detected. ATI provides a proprietary closed source driver for  models X1950 and above. This driver will provide better 3D acceleration, if this is not required, it is recommended to continue to use the provided open source driver. This program can automatically download and install this driver for you if desired. Installation of the proprietary driver will reboot the machine when finished.\n" --button=$"Don't Ask Again:1" --button=$"Not Now:3" --button=$"Install:5"
ret="$?"

if [ "$ret" = "252" ]; then
 killall -KILL yad
 exit 0
elif [ "$ret" = "1" ]; then
 touch $HOME/.magix-dont-run
 killall -KILL yad
 exit 0
elif [ "$ret" = "3" ]; then
 exit 0
elif [ "$ret" = "5" ]; then
 killall -KILL yad
 gksudo /usr/bin/magix-driver-installer
 exit 0
fi

fi
 
exit
